import reflex as rx

from buridan_ui.private._chord import chord_chart


def chord_v1():
    # Example data - matrix representing flows between entities
    # Each row represents the outgoing flow from an entity to others (including itself)
    matrix = [
        [
            248,
            153,
            92,
            1635,
            1406,
            138,
            147,
            136,
            1166,
            1500,
            271,
            93,
            100,
            406,
            528,
            248,
            9,
            877,
            59,
            155,
            263,
            230,
            1197,
            223,
            1002,
            1062,
            319,
            318,
            183,
            140,
            115,
            1085,
            763,
            385,
            28,
            503,
            206,
            1811,
        ],
        [
            128,
            585,
            1692,
            1966,
            317,
            23,
            7,
            271,
            368,
            4,
            190,
            1370,
            161,
            577,
            1579,
            394,
            1404,
            40,
            455,
            1688,
            1000,
            295,
            100,
            346,
            419,
            118,
            1658,
            871,
            267,
            91,
            229,
            542,
            314,
            440,
            1835,
            74,
            320,
            173,
        ],
        [
            580,
            40,
            362,
            295,
            0,
            9,
            951,
            125,
            222,
            125,
            121,
            463,
            123,
            126,
            74,
            463,
            1147,
            473,
            224,
            813,
            503,
            134,
            229,
            356,
            496,
            190,
            907,
            265,
            483,
            1378,
            1445,
            289,
            226,
            1360,
            78,
            153,
            94,
            268,
        ],
        [
            1124,
            199,
            1786,
            1634,
            385,
            237,
            1,
            146,
            1554,
            402,
            156,
            521,
            1281,
            245,
            261,
            256,
            99,
            375,
            1843,
            887,
            41,
            51,
            639,
            442,
            100,
            492,
            85,
            431,
            50,
            345,
            475,
            1504,
            939,
            153,
            346,
            416,
            181,
            366,
        ],
        [
            26,
            379,
            637,
            279,
            229,
            328,
            477,
            83,
            445,
            64,
            1026,
            118,
            92,
            420,
            314,
            111,
            239,
            1708,
            732,
            858,
            1419,
            571,
            132,
            440,
            155,
            132,
            153,
            403,
            129,
            1237,
            478,
            52,
            404,
            324,
            235,
            741,
            460,
            194,
        ],
        [
            1767,
            186,
            47,
            1848,
            338,
            112,
            91,
            380,
            327,
            453,
            148,
            151,
            373,
            57,
            977,
            1978,
            957,
            376,
            1168,
            0,
            35,
            462,
            71,
            358,
            356,
            198,
            55,
            754,
            1573,
            145,
            260,
            395,
            258,
            244,
            1458,
            26,
            281,
            1429,
        ],
        [
            469,
            1599,
            323,
            205,
            476,
            42,
            262,
            543,
            66,
            239,
            1948,
            249,
            1899,
            83,
            152,
            101,
            558,
            360,
            156,
            107,
            125,
            312,
            262,
            1499,
            131,
            1548,
            293,
            382,
            988,
            4,
            1652,
            821,
            189,
            849,
            1158,
            465,
            318,
            484,
        ],
        [
            685,
            471,
            422,
            579,
            1154,
            116,
            212,
            232,
            356,
            476,
            1643,
            1717,
            354,
            456,
            233,
            1137,
            758,
            187,
            234,
            394,
            103,
            1657,
            121,
            442,
            83,
            462,
            250,
            432,
            204,
            286,
            255,
            718,
            747,
            412,
            250,
            357,
            358,
            1623,
        ],
        [
            821,
            470,
            398,
            125,
            394,
            83,
            190,
            57,
            286,
            187,
            68,
            311,
            1855,
            431,
            251,
            108,
            167,
            389,
            217,
            243,
            758,
            43,
            315,
            6,
            1185,
            1931,
            263,
            1689,
            432,
            46,
            426,
            430,
            52,
            365,
            174,
            465,
            117,
            331,
        ],
        [
            763,
            107,
            1282,
            62,
            429,
            185,
            1896,
            106,
            1041,
            1912,
            277,
            232,
            233,
            173,
            424,
            303,
            341,
            120,
            247,
            71,
            1536,
            1604,
            5,
            327,
            418,
            485,
            1026,
            409,
            210,
            432,
            697,
            254,
            288,
            342,
            178,
            48,
            237,
            331,
        ],
        [
            1446,
            130,
            48,
            72,
            1929,
            444,
            144,
            259,
            350,
            305,
            110,
            345,
            699,
            223,
            423,
            341,
            193,
            343,
            284,
            391,
            1815,
            273,
            1502,
            211,
            1270,
            1413,
            288,
            44,
            1035,
            270,
            478,
            1879,
            21,
            454,
            448,
            290,
            441,
            164,
        ],
        [
            1198,
            247,
            288,
            217,
            1175,
            379,
            1047,
            195,
            939,
            230,
            188,
            166,
            177,
            370,
            524,
            1298,
            1425,
            372,
            34,
            483,
            492,
            377,
            298,
            478,
            29,
            343,
            745,
            179,
            15,
            462,
            142,
            82,
            357,
            245,
            130,
            364,
            158,
            258,
        ],
        [
            295,
            196,
            484,
            801,
            196,
            476,
            304,
            1684,
            249,
            1922,
            298,
            1060,
            55,
            20,
            323,
            29,
            67,
            343,
            552,
            170,
            307,
            275,
            330,
            370,
            1061,
            47,
            77,
            364,
            288,
            157,
            1262,
            10,
            114,
            389,
            1114,
            1056,
            191,
            1417,
        ],
        [
            349,
            480,
            834,
            266,
            1574,
            67,
            393,
            433,
            105,
            332,
            322,
            92,
            261,
            938,
            227,
            699,
            787,
            83,
            75,
            45,
            137,
            348,
            102,
            421,
            336,
            218,
            281,
            501,
            35,
            313,
            1478,
            1619,
            146,
            392,
            138,
            404,
            417,
            173,
        ],
    ]

    # Labels for each entity
    keys = [
        "John",
        "Raoul",
        "Jane",
        "Marcel",
        "Ibrahim",
        "Junko",
        "Lyu",
        "André",
        "Maki",
        "Véronique",
        "Thibeau",
        "Josiane",
        "Raphaël",
        "Mathéo",
    ]

    return rx.box(
        rx.el.div(
            chord_chart(
                data=matrix,
                keys=keys,
                colors={"scheme": "nivo"},
                padding=0.02,
                inner_radius_ratio=0.95,
                arc_opacity=1,
                arc_border_width=0,
                arc_border_color={"from": "color", "modifiers": [["darker", 0.4]]},
                ribbon_border_width=1,
                ribbon_border_color={"from": "color", "modifiers": [["darker", 0.4]]},
                ribbon_opacity=0.7,
                ribbon_blend_mode="multiply",
                label_rotation=-90,
                label_text_color={"from": "color", "modifiers": [["darker", 1]]},
                label_offset=16,
                label_text_size=14,
                is_interactive=True,
                legends=[],
            ),
            height="400px",
            width="400px",
        ),
        class_name="size-full flex items-center justify-center align-center overflow-x-scroll",
    )
